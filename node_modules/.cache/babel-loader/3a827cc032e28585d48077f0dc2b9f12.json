{"ast":null,"code":"import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\nexport const login = (user, history) => {\n  return () => {\n    return sessionApi.login(user).then(res => {});\n    return sessionApi.login(user).then(response => {\n      console.log(response); //============response dat ten la gi cung duoc, nhung no la gia tri thanh cong cua promise \n      //sessionApi.login(user) la Promise\n\n      const {\n        token\n      } = response.data;\n      sessionService.saveSession({\n        token\n      }) // saveSession tra ve Promise\n      .then(() => {\n        sessionService.saveUser(response.data.user).then(() => {\n          history.push('/');\n        }).catch(err => console.error(err));\n      }).catch(err => console.error(err));\n    });\n  };\n};\nexport const logout = history => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw err;\n    });\n  };\n};","map":{"version":3,"sources":["/home/longdq08/react_project/miagi-inside-web/src/actions/sessionActions.js"],"names":["sessionService","sessionApi","login","user","history","then","res","response","console","log","token","data","saveSession","saveUser","push","catch","err","error","logout","deleteSession","deleteUser"],"mappings":"AAAA,SAASA,cAAT,QAA+B,qBAA/B;AACA,OAAO,KAAKC,UAAZ,MAA4B,mBAA5B;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,IAAD,EAAOC,OAAP,KAAmB;AACtC,SAAO,MAAM;AACX,WAAOH,UAAU,CAACC,KAAX,CAAiBC,IAAjB,EAAuBE,IAAvB,CAA8BC,GAAD,IAAS,CAE5C,CAFM,CAAP;AAIA,WAAOL,UAAU,CAACC,KAAX,CAAiBC,IAAjB,EAAuBE,IAAvB,CAA4BE,QAAQ,IAAI;AAC7CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAD6C,CAE7C;AACA;;AACA,YAAM;AAAEG,QAAAA;AAAF,UAAYH,QAAQ,CAACI,IAA3B;AACAX,MAAAA,cAAc,CAACY,WAAf,CAA2B;AAAEF,QAAAA;AAAF,OAA3B,EAAsC;AAAtC,OACCL,IADD,CACM,MAAM;AACVL,QAAAA,cAAc,CAACa,QAAf,CAAwBN,QAAQ,CAACI,IAAT,CAAcR,IAAtC,EACCE,IADD,CACM,MAAM;AACVD,UAAAA,OAAO,CAACU,IAAR,CAAa,GAAb;AACD,SAHD,EAGGC,KAHH,CAGSC,GAAG,IAAIR,OAAO,CAACS,KAAR,CAAcD,GAAd,CAHhB;AAID,OAND,EAMGD,KANH,CAMSC,GAAG,IAAIR,OAAO,CAACS,KAAR,CAAcD,GAAd,CANhB;AAOD,KAZM,CAAP;AAaD,GAlBD;AAmBD,CApBM;AAsBP,OAAO,MAAME,MAAM,GAAId,OAAD,IAAa;AACjC,SAAO,MAAM;AACX,WAAOH,UAAU,CAACiB,MAAX,GAAoBb,IAApB,CAAyB,MAAM;AACpCL,MAAAA,cAAc,CAACmB,aAAf;AACAnB,MAAAA,cAAc,CAACoB,UAAf;AACAhB,MAAAA,OAAO,CAACU,IAAR,CAAa,QAAb;AACD,KAJM,EAIJC,KAJI,CAIEC,GAAG,IAAI;AACd,YAAOA,GAAP;AACD,KANM,CAAP;AAOD,GARD;AASD,CAVM","sourcesContent":["import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nexport const login = (user, history) => {\n  return () => {\n    return sessionApi.login(user).then( (res) => {\n\n    })\n\n    return sessionApi.login(user).then(response => { \n      console.log(response);\n      //============response dat ten la gi cung duoc, nhung no la gia tri thanh cong cua promise \n      //sessionApi.login(user) la Promise\n      const { token } = response.data;\n      sessionService.saveSession({ token }) // saveSession tra ve Promise\n      .then(() => {\n        sessionService.saveUser(response.data.user)\n        .then(() => {\n          history.push('/');\n        }).catch(err => console.error(err));\n      }).catch(err => console.error(err));\n    });\n  };\n};\n\nexport const logout = (history) => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw (err);\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}