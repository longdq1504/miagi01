{"ast":null,"code":"import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nfunction checkValidParams(params) {\n  if (!params.email || params.email === '') {\n    throw Error(\"Vui long nhap email!!\");\n  }\n\n  if (!params.password || params.password === '') {\n    throw Error(\"Vui long nhap mat khau!!\");\n  }\n}\n\nexport const login = params => {\n  return async () => {\n    try {\n      checkValidParams(params);\n      const {\n        token,\n        user\n      } = await sessionApi.login(params); // sau await buoc phai la Promise, Promise co 2 trang thai pending va done, done thi co 2 TH resolve reject\n\n      console.log(user); // resolve thanh cong va tiep tuc luong, reject thi se di va catch\n\n      await sessionService.saveSession(token);\n      await sessionService.saveUser(user);\n    } catch (ex) {\n      //reject\n      throw ex;\n    }\n  };\n};\nexport const logout = history => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw err;\n    });\n  };\n};","map":{"version":3,"sources":["/home/longdq08/react_project/miagi-inside-web/src/actions/sessionActions.js"],"names":["sessionService","sessionApi","checkValidParams","params","email","Error","password","login","token","user","console","log","saveSession","saveUser","ex","logout","history","then","deleteSession","deleteUser","push","catch","err"],"mappings":"AAAA,SAASA,cAAT,QAA+B,qBAA/B;AACA,OAAO,KAAKC,UAAZ,MAA4B,mBAA5B;;AAEA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,MAAG,CAACA,MAAM,CAACC,KAAR,IAAiBD,MAAM,CAACC,KAAP,KAAiB,EAArC,EAAwC;AACtC,UAAMC,KAAK,CAAC,uBAAD,CAAX;AACD;;AACD,MAAG,CAACF,MAAM,CAACG,QAAR,IAAoBH,MAAM,CAACG,QAAP,KAAoB,EAA3C,EAA+C;AAC7C,UAAMD,KAAK,CAAC,0BAAD,CAAX;AACD;AACF;;AAED,OAAO,MAAME,KAAK,GAAIJ,MAAD,IAAY;AAC/B,SAAO,YAAY;AACf,QAAI;AACFD,MAAAA,gBAAgB,CAACC,MAAD,CAAhB;AACA,YAAM;AAACK,QAAAA,KAAD;AAAQC,QAAAA;AAAR,UAAgB,MAAMR,UAAU,CAACM,KAAX,CAAiBJ,MAAjB,CAA5B,CAFE,CAEoD;;AACtDO,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAHE,CAGmD;;AACrD,YAAMT,cAAc,CAACY,WAAf,CAA2BJ,KAA3B,CAAN;AACA,YAAMR,cAAc,CAACa,QAAf,CAAwBJ,IAAxB,CAAN;AACD,KAND,CAME,OAAOK,EAAP,EAAW;AAAE;AACb,YAAMA,EAAN;AACD;AACJ,GAVD;AAWD,CAZM;AAcP,OAAO,MAAMC,MAAM,GAAIC,OAAD,IAAa;AACjC,SAAO,MAAM;AACX,WAAOf,UAAU,CAACc,MAAX,GAAoBE,IAApB,CAAyB,MAAM;AACpCjB,MAAAA,cAAc,CAACkB,aAAf;AACAlB,MAAAA,cAAc,CAACmB,UAAf;AACAH,MAAAA,OAAO,CAACI,IAAR,CAAa,QAAb;AACD,KAJM,EAIJC,KAJI,CAIEC,GAAG,IAAI;AACd,YAAOA,GAAP;AACD,KANM,CAAP;AAOD,GARD;AASD,CAVM","sourcesContent":["import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nfunction checkValidParams(params) {\n  if(!params.email || params.email === ''){\n    throw Error(\"Vui long nhap email!!\");\n  }\n  if(!params.password || params.password === '') {\n    throw Error(\"Vui long nhap mat khau!!\");\n  }\n}\n\nexport const login = (params) => {\n  return async () => {\n      try {\n        checkValidParams(params);\n        const {token, user} = await sessionApi.login(params); // sau await buoc phai la Promise, Promise co 2 trang thai pending va done, done thi co 2 TH resolve reject\n        console.log(user);                                   // resolve thanh cong va tiep tuc luong, reject thi se di va catch\n        await sessionService.saveSession(token);\n        await sessionService.saveUser(user);\n      } catch (ex) { //reject\n        throw ex; \n      }\n  };\n};\n\nexport const logout = (history) => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw (err);\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}