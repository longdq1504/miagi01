{"ast":null,"code":"import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nfunction checkValidParams(params) {\n  if (!params.email || params.email == '') {\n    throw Error(\"Vui long nhap email!!\");\n  }\n\n  if (!params.password || params.password == '') {\n    throw Error(\"Vui long nhap mat khau!!\");\n  }\n}\n\nexport const login = param => {\n  return async () => {\n    try {\n      const {\n        token,\n        user\n      } = await sessionApi.login(param); // sau await buoc phai la Promise, Promise co 2 trang thai pending va done, done thi co 2 TH resolve reject\n\n      console.log(user); // resolve thanh cong va tiep tuc luong, reject thi se di va catch\n\n      await sessionService.saveSession(token);\n      await sessionService.saveUser(user);\n    } catch (ex) {\n      throw ex; //reject\n    }\n  };\n};\nexport const logout = history => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw err;\n    });\n  };\n};","map":{"version":3,"sources":["/home/longdq08/react_project/miagi-inside-web/src/actions/sessionActions.js"],"names":["sessionService","sessionApi","checkValidParams","params","email","Error","password","login","param","token","user","console","log","saveSession","saveUser","ex","logout","history","then","deleteSession","deleteUser","push","catch","err"],"mappings":"AAAA,SAASA,cAAT,QAA+B,qBAA/B;AACA,OAAO,KAAKC,UAAZ,MAA4B,mBAA5B;;AAEA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,MAAG,CAACA,MAAM,CAACC,KAAR,IAAiBD,MAAM,CAACC,KAAP,IAAgB,EAApC,EAAuC;AACrC,UAAMC,KAAK,CAAC,uBAAD,CAAX;AACD;;AACD,MAAG,CAACF,MAAM,CAACG,QAAR,IAAoBH,MAAM,CAACG,QAAP,IAAmB,EAA1C,EAA8C;AAC5C,UAAMD,KAAK,CAAC,0BAAD,CAAX;AACD;AACF;;AAED,OAAO,MAAME,KAAK,GAAIC,KAAD,IAAW;AAC9B,SAAO,YAAY;AACf,QAAI;AACF,YAAM;AAACC,QAAAA,KAAD;AAAQC,QAAAA;AAAR,UAAgB,MAAMT,UAAU,CAACM,KAAX,CAAiBC,KAAjB,CAA5B,CADE,CACmD;;AACrDG,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAFE,CAEmD;;AACrD,YAAMV,cAAc,CAACa,WAAf,CAA2BJ,KAA3B,CAAN;AACA,YAAMT,cAAc,CAACc,QAAf,CAAwBJ,IAAxB,CAAN;AACD,KALD,CAKE,OAAOK,EAAP,EAAW;AACX,YAAMA,EAAN,CADW,CACD;AACX;AACJ,GATD;AAUD,CAXM;AAaP,OAAO,MAAMC,MAAM,GAAIC,OAAD,IAAa;AACjC,SAAO,MAAM;AACX,WAAOhB,UAAU,CAACe,MAAX,GAAoBE,IAApB,CAAyB,MAAM;AACpClB,MAAAA,cAAc,CAACmB,aAAf;AACAnB,MAAAA,cAAc,CAACoB,UAAf;AACAH,MAAAA,OAAO,CAACI,IAAR,CAAa,QAAb;AACD,KAJM,EAIJC,KAJI,CAIEC,GAAG,IAAI;AACd,YAAOA,GAAP;AACD,KANM,CAAP;AAOD,GARD;AASD,CAVM","sourcesContent":["import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nfunction checkValidParams(params) {\n  if(!params.email || params.email == ''){\n    throw Error(\"Vui long nhap email!!\");\n  }\n  if(!params.password || params.password == '') {\n    throw Error(\"Vui long nhap mat khau!!\");\n  }\n}\n\nexport const login = (param) => {\n  return async () => {\n      try {\n        const {token, user} = await sessionApi.login(param); // sau await buoc phai la Promise, Promise co 2 trang thai pending va done, done thi co 2 TH resolve reject\n        console.log(user);                                   // resolve thanh cong va tiep tuc luong, reject thi se di va catch\n        await sessionService.saveSession(token);\n        await sessionService.saveUser(user);\n      } catch (ex) {\n        throw ex; //reject\n      }\n  };\n};\n\nexport const logout = (history) => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw (err);\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}