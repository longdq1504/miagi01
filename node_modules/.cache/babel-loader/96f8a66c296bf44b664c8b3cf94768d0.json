{"ast":null,"code":"import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\nexport const login = async user => {\n  return () => {\n    return sessionApi.login(user).then(res => {\n      sessionService.saveSession({\n        token\n      }); // saveSession tra ve Promise\n    });\n    return sessionApi.login(user).then(response => {\n      console.log(response); //============response dat ten la gi cung duoc, nhung no la gia tri thanh cong cua promise \n      //sessionApi.login(user) la Promise\n\n      const {\n        token\n      } = response.data;\n      sessionService.saveSession({\n        token\n      }) // saveSession tra ve Promise\n      .then(() => {\n        sessionService.saveUser(response.data.user).then(() => {\n          history.push('/');\n        }).catch(err => console.error(err));\n      }).catch(err => console.error(err));\n    });\n  };\n};\nexport const logout = history => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw err;\n    });\n  };\n};","map":{"version":3,"sources":["/home/longdq08/react_project/miagi-inside-web/src/actions/sessionActions.js"],"names":["sessionService","sessionApi","login","user","then","res","saveSession","token","response","console","log","data","saveUser","history","push","catch","err","error","logout","deleteSession","deleteUser"],"mappings":"AAAA,SAASA,cAAT,QAA+B,qBAA/B;AACA,OAAO,KAAKC,UAAZ,MAA4B,mBAA5B;AAEA,OAAO,MAAMC,KAAK,GAAG,MAAOC,IAAP,IAAgB;AACnC,SAAO,MAAM;AACX,WAAOF,UAAU,CAACC,KAAX,CAAiBC,IAAjB,EAAuBC,IAAvB,CAA8BC,GAAD,IAAS;AAC1CL,MAAAA,cAAc,CAACM,WAAf,CAA2B;AAAEC,QAAAA;AAAF,OAA3B,EAD0C,CACJ;AACxC,KAFM,CAAP;AAIA,WAAON,UAAU,CAACC,KAAX,CAAiBC,IAAjB,EAAuBC,IAAvB,CAA4BI,QAAQ,IAAI;AAC7CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAD6C,CAE7C;AACA;;AACA,YAAM;AAAED,QAAAA;AAAF,UAAYC,QAAQ,CAACG,IAA3B;AACAX,MAAAA,cAAc,CAACM,WAAf,CAA2B;AAAEC,QAAAA;AAAF,OAA3B,EAAsC;AAAtC,OACCH,IADD,CACM,MAAM;AACVJ,QAAAA,cAAc,CAACY,QAAf,CAAwBJ,QAAQ,CAACG,IAAT,CAAcR,IAAtC,EACCC,IADD,CACM,MAAM;AACVS,UAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACD,SAHD,EAGGC,KAHH,CAGSC,GAAG,IAAIP,OAAO,CAACQ,KAAR,CAAcD,GAAd,CAHhB;AAID,OAND,EAMGD,KANH,CAMSC,GAAG,IAAIP,OAAO,CAACQ,KAAR,CAAcD,GAAd,CANhB;AAOD,KAZM,CAAP;AAaD,GAlBD;AAmBD,CApBM;AAsBP,OAAO,MAAME,MAAM,GAAIL,OAAD,IAAa;AACjC,SAAO,MAAM;AACX,WAAOZ,UAAU,CAACiB,MAAX,GAAoBd,IAApB,CAAyB,MAAM;AACpCJ,MAAAA,cAAc,CAACmB,aAAf;AACAnB,MAAAA,cAAc,CAACoB,UAAf;AACAP,MAAAA,OAAO,CAACC,IAAR,CAAa,QAAb;AACD,KAJM,EAIJC,KAJI,CAIEC,GAAG,IAAI;AACd,YAAOA,GAAP;AACD,KANM,CAAP;AAOD,GARD;AASD,CAVM","sourcesContent":["import { sessionService } from 'redux-react-session';\nimport * as sessionApi from '../api/sessionApi';\n\nexport const login = async (user) => {\n  return () => {\n    return sessionApi.login(user).then( (res) => {\n       sessionService.saveSession({ token }) // saveSession tra ve Promise\n    })\n\n    return sessionApi.login(user).then(response => { \n      console.log(response);\n      //============response dat ten la gi cung duoc, nhung no la gia tri thanh cong cua promise \n      //sessionApi.login(user) la Promise\n      const { token } = response.data;\n      sessionService.saveSession({ token }) // saveSession tra ve Promise\n      .then(() => {\n        sessionService.saveUser(response.data.user)\n        .then(() => {\n          history.push('/');\n        }).catch(err => console.error(err));\n      }).catch(err => console.error(err));\n    });\n  };\n};\n\nexport const logout = (history) => {\n  return () => {\n    return sessionApi.logout().then(() => {\n      sessionService.deleteSession();\n      sessionService.deleteUser();\n      history.push('/login');\n    }).catch(err => {\n      throw (err);\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}